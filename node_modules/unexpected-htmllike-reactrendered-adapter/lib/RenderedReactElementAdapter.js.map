{"version":3,"sources":["../src/RenderedReactElementAdapter.js"],"names":[],"mappings":"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","file":"RenderedReactElementAdapter.js","sourcesContent":["import GlobalHook from 'react-render-hook';\nimport React from 'react';\nimport ObjectAssign from 'object-assign';\n\nconst defaultOptions = {};\n\nfunction isRawType(value) {\n    var type = typeof value;\n    return type === 'string' ||\n        type === 'number' ||\n        type === 'boolean' ||\n        type === 'undefined' ||\n        value === null;\n}\n\nfunction convertValueTypeToString(value) {\n\n    if (typeof value === 'string') { // Common case can be fasttracked\n        return value;\n    }\n\n    if (value === null || value === undefined) {\n        return '';\n    }\n\n    return '' + value;\n}\n\nfunction concatenateStringChildren(accum, value) {\n    if (isRawType(value) && accum.length &&\n        isRawType(accum[accum.length - 1]))\n    {\n        accum[accum.length - 1] = convertValueTypeToString(accum[accum.length - 1]) + convertValueTypeToString(value);\n        return accum;\n    }\n    accum.push(value);\n    return accum;\n}\n\n\nclass RenderedReactElementAdapter {\n\n    constructor(options) {\n        this._options = ObjectAssign({}, defaultOptions, options);\n    }\n\n    getName(comp) {\n        return comp.data.name;\n    }\n\n    getAttributes(comp) {\n        const props = {};\n        if (comp.data.props) {\n            Object.keys(comp.data.props).forEach(prop => {\n                if (prop !== 'children' && prop !== 'ref' && prop !== 'key') {\n                    props[prop] = comp.data.props[prop];\n                }\n            });\n        }\n\n        return props;\n    }\n\n    getChildren(comp) {\n        let children = [];\n        if (comp.data.children) {\n            if (isRawType(comp.data.children)) {\n                return this._options.convertToString ? [ '' + comp.data.children ] : [ comp.data.children ];\n            }\n            children = comp.data.children.map(child => {\n                const renderedChild = GlobalHook.findInternalComponent(child);\n                switch (renderedChild.data.nodeType) {\n                    case 'NativeWrapper':\n                        return GlobalHook.findInternalComponent(renderedChild.data.children[0]);\n                    case 'Text':\n                        return this._options.convertToString ? '' + renderedChild.data.text : renderedChild.data.text;\n                }\n\n                return renderedChild;\n            });\n\n            if (this._options.concatTextContent) {\n                children = children.reduce(concatenateStringChildren, [])\n            }\n        }\n        return children;\n    }\n\n    setOptions(newOpts) {\n        this._options = ObjectAssign(this._options, newOpts);\n    }\n}\n\nRenderedReactElementAdapter.prototype.classAttributeName = 'className';\n\nexport default RenderedReactElementAdapter;"]}